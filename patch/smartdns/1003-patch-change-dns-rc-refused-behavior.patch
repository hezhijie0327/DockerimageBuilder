From f64524e0442efd593540a8056532cd97dd68f1f0 Mon Sep 17 00:00:00 2001
From: Zhijie He <hezhijie0327@hotmail.com>
Date: Sun, 3 Sep 2023 06:53:41 +0800
Subject: [PATCH] change DNS_RC_REFUSED behavior

---
 src/dns_client.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/src/dns_client.c b/src/dns_client.c
index 0795abd..fdc09d7 100644
--- a/src/dns_client.c
+++ b/src/dns_client.c
@@ -3906,8 +3906,7 @@ static int _dns_client_pending_server_resolve(const struct dns_result *result, v
 	int ret = 0;
 	int has_soa = 0;

-	if (result->rtcode == DNS_RC_NXDOMAIN || result->has_soa == 1 || result->rtcode == DNS_RC_REFUSED ||
-		(result->rtcode == DNS_RC_NOERROR && result->ip_num == 0)) {
+	if (result->rtcode == DNS_RC_NXDOMAIN || result->has_soa == 1 {
 		has_soa = 1;
 	}

--
2.42.0
