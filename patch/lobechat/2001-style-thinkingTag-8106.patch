diff --git a/src/libs/model-runtime/utils/streams/openai.ts b/src/libs/model-runtime/utils/streams/openai.ts
index fbb5ad1678f8f..d96113bc3e25e 100644
--- a/src/libs/model-runtime/utils/streams/openai.ts
+++ b/src/libs/model-runtime/utils/streams/openai.ts
@@ -242,7 +242,21 @@ export const transformOpenAIStream = (
           }
         }
 
-        return { data: content, id: chunk.id, type: 'text' };
+        // 处理 <think> & </think> 思考链，清除 <think> 标签和周围空白
+        const thinkingContent = content.replace(/\s*<\/?think>\s*/g, '');
+        // 判断是否有 <think> 或 </think> 标签，更新状态
+        if (content.includes('<think>')) {
+          streamContext.thinkingInContent = true;
+        } else if (content.includes('</think>')) {
+          streamContext.thinkingInContent = false;
+        }
+
+        // 返回类型根据当前思考模式确定
+        return {
+          data: thinkingContent,
+          id: chunk.id,
+          type: streamContext?.thinkingInContent ? 'reasoning' : 'text',
+        };
       }
     }
 
diff --git a/src/libs/model-runtime/utils/streams/protocol.ts b/src/libs/model-runtime/utils/streams/protocol.ts
index a0e6f0832e03a..fe1df5db3274d 100644
--- a/src/libs/model-runtime/utils/streams/protocol.ts
+++ b/src/libs/model-runtime/utils/streams/protocol.ts
@@ -27,6 +27,18 @@ export interface StreamContext {
     id: string;
     name: string;
   };
+  /**
+   * Indicates whether the current state is within a "thinking" segment of the model output
+   * (e.g., when processing lmstudio responses).
+   *
+   * When parsing output containing <think> and </think> tags:
+   * - Set to `true` upon encountering a <think> tag (entering reasoning mode)
+   * - Set to `false` upon encountering a </think> tag (exiting reasoning mode)
+   *
+   * While `thinkingInContent` is `true`, subsequent content should be stored in `reasoning_content`.
+   * When `false`, content should be stored in the regular `content` field.
+   */
+  thinkingInContent?: boolean;
   tool?: {
     id: string;
     index: number;
