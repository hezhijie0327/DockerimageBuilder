diff --git a/src/features/Conversation/components/ShareMessageModal/ShareImage/Preview.tsx b/src/features/Conversation/components/ShareMessageModal/ShareImage/Preview.tsx
index 73ea631a0589a..f83695cc779a5 100644
--- a/src/features/Conversation/components/ShareMessageModal/ShareImage/Preview.tsx
+++ b/src/features/Conversation/components/ShareMessageModal/ShareImage/Preview.tsx
@@ -36,6 +36,30 @@ const Preview = memo<PreviewProps>(
 
     const { t } = useTranslation('chat');
 
+    // Handle assistantGroup messages - content might be in children
+    let content = message.content;
+    if (message.role === 'assistantGroup' && message.children && message.children.length > 0) {
+      // For assistantGroup, use the last child's content
+      const lastChild = message.children.at(-1);
+      content = lastChild?.content || message.content;
+    }
+
+    // Debug: Log to see what we're working with
+    console.log('ShareMessage Preview Details:', {
+      agentMeta,
+      childrenCount: message.children?.length,
+      displayTitle: agentMeta.title || title,
+      extractedContent: content,
+      extractedContentLength: content?.length,
+      hasChildren: !!message.children,
+      messageAgentId: message.agentId,
+      messageContent: message.content,
+      messageContentLength: message.content?.length,
+      messageId: message.id,
+      messageRole: message.role,
+      placement: message.role === 'user' ? 'right' : 'left',
+    });
+
     const displayTitle = agentMeta.title || title;
     const displayDesc = isBuiltinAgent ? t('inbox.desc') : agentMeta.description;
 
@@ -78,7 +102,11 @@ const Preview = memo<PreviewProps>(
                   backgroundColor: agentMeta.backgroundColor,
                   title: displayTitle,
                 }}
-                id={message.id}
+                message={content}
+                placement={message.role === 'user' ? 'right' : 'left'}
+                showAvatar={true}
+                showTitle={false}
+                time={message.createdAt}
               />
             </Flexbox>
             {withFooter ? (
diff --git a/src/features/Conversation/components/ShareMessageModal/ShareText/index.tsx b/src/features/Conversation/components/ShareMessageModal/ShareText/index.tsx
index f180106ddef5d..02d8ecb827eda 100644
--- a/src/features/Conversation/components/ShareMessageModal/ShareText/index.tsx
+++ b/src/features/Conversation/components/ShareMessageModal/ShareText/index.tsx
@@ -23,7 +23,18 @@ const ShareText = memo<ShareTextProps>(({ item }) => {
   const { t } = useTranslation(['chat', 'common']);
   const { message } = App.useApp();
 
-  const messages = [item];
+  // Handle assistantGroup messages - content might be in children
+  let contentItem = item;
+  if (item.role === 'assistantGroup' && item.children && item.children.length > 0) {
+    // For assistantGroup, use the last child's content
+    const lastChild = item.children.at(-1);
+    contentItem = {
+      ...item,
+      content: lastChild?.content || item.content,
+    };
+  }
+
+  const messages = [contentItem];
   const topic = useChatStore(topicSelectors.currentActiveTopic, isEqual);
 
   const title = topic?.title || t('shareModal.exportTitle');
diff --git a/src/features/Conversation/hooks/useChatItemContextMenu.tsx b/src/features/Conversation/hooks/useChatItemContextMenu.tsx
index df37a9e313cd1..2fe8911c6b4d6 100644
--- a/src/features/Conversation/hooks/useChatItemContextMenu.tsx
+++ b/src/features/Conversation/hooks/useChatItemContextMenu.tsx
@@ -194,9 +194,12 @@ export const useChatItemContextMenu = ({
           createStore={() => {
             const state = storeApi.getState();
             return createStore({
-              context: state.context,
+              context: {
+                ...state.context,
+                agentId: item.agentId || state.context.agentId,
+              },
               hooks: state.hooks,
-              skipFetch: state.skipFetch,
+              skipFetch: true,
             });
           }}
         >
diff --git a/src/features/ShareModal/ShareImage/ChatList/index.tsx b/src/features/ShareModal/ShareImage/ChatList/index.tsx
index 4bfe4bc64ba68..08dfc5d0578a8 100644
--- a/src/features/ShareModal/ShareImage/ChatList/index.tsx
+++ b/src/features/ShareModal/ShareImage/ChatList/index.tsx
@@ -1,13 +1,14 @@
 import { Flexbox } from '@lobehub/ui';
+import isEqual from 'fast-deep-equal';
 import { memo } from 'react';
 
 import { ConversationProvider, MessageItem } from '@/features/Conversation';
 import { useChatStore } from '@/store/chat';
-import { chatSelectors } from '@/store/chat/selectors';
+import { dbMessageSelectors } from '@/store/chat/selectors';
 
 const ChatList = memo(() => {
-  const ids = useChatStore(chatSelectors.mainDisplayChatIDs);
-  const messages = useChatStore(chatSelectors.activeBaseChats);
+  const messages = useChatStore(dbMessageSelectors.activeDbMessages, isEqual);
+  const ids = messages.map((m) => m.id);
   const agentId = useChatStore((s) => s.activeAgentId);
   const topicId = useChatStore((s) => s.activeTopicId);
 
diff --git a/src/features/ShareModal/SharePdf/index.tsx b/src/features/ShareModal/SharePdf/index.tsx
index 5516beb6609ac..d19c7378592eb 100644
--- a/src/features/ShareModal/SharePdf/index.tsx
+++ b/src/features/ShareModal/SharePdf/index.tsx
@@ -13,7 +13,7 @@ import { useIsMobile } from '@/hooks/useIsMobile';
 import { useAgentStore } from '@/store/agent';
 import { agentSelectors } from '@/store/agent/selectors';
 import { useChatStore } from '@/store/chat';
-import { chatSelectors, topicSelectors } from '@/store/chat/selectors';
+import { dbMessageSelectors, topicSelectors } from '@/store/chat/selectors';
 
 import { generateMarkdown } from '../ShareText/template';
 import { type FieldType } from '../ShareText/type';
@@ -73,7 +73,7 @@ const SharePdf = memo((props: { message?: UIChatMessage }) => {
 
   // Use the same data gathering logic as ShareText
   const [systemRole] = useAgentStore((s) => [agentSelectors.currentAgentSystemRole(s)]);
-  const messages = useChatStore(chatSelectors.activeBaseChats, isEqual);
+  const messages = useChatStore(dbMessageSelectors.activeDbMessages, isEqual);
   const topic = useChatStore(topicSelectors.currentActiveTopic, isEqual);
   const activeId = useChatStore((s) => s.activeAgentId);
   const topicId = useChatStore((s) => s.activeTopicId);
diff --git a/src/features/ShareModal/ShareText/index.tsx b/src/features/ShareModal/ShareText/index.tsx
index c964ca4186f00..4741ad1eadab0 100644
--- a/src/features/ShareModal/ShareText/index.tsx
+++ b/src/features/ShareModal/ShareText/index.tsx
@@ -12,7 +12,10 @@ import { useIsMobile } from '@/hooks/useIsMobile';
 import { useAgentStore } from '@/store/agent';
 import { agentSelectors } from '@/store/agent/selectors';
 import { useChatStore } from '@/store/chat';
-import { displayMessageSelectors, topicSelectors } from '@/store/chat/selectors';
+import {
+  dbMessageSelectors,
+  topicSelectors,
+} from '@/store/chat/selectors';
 
 import { styles } from '../style';
 import Preview from './Preview';
@@ -66,7 +69,7 @@ const ShareText = memo(() => {
   ];
 
   const [systemRole] = useAgentStore((s) => [agentSelectors.currentAgentSystemRole(s)]);
-  const messages = useChatStore(displayMessageSelectors.activeDisplayMessages, isEqual);
+  const messages = useChatStore(dbMessageSelectors.activeDbMessages, isEqual);
   const topic = useChatStore(topicSelectors.currentActiveTopic, isEqual);
 
   const title = topic?.title || t('shareModal.exportTitle');
